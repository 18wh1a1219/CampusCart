{"version":3,"names":["isTablet","useDetectDevice","isIOS","ic_down","require","defaultProps","placeholder","activeColor","backgroundColor","data","style","MultiSelectComponent","React","forwardRef","props","currentRef","orientation","onChange","value","labelField","valueField","selectedStyle","selectedTextStyle","iconStyle","containerStyle","fontFamily","placeholderStyle","iconColor","inputSearchStyle","searchPlaceholder","search","maxHeight","maxSelect","disable","keyboardAvoiding","inside","renderItem","renderLeftIcon","renderRightIcon","renderSelectedItem","renderInputSearch","onFocus","onBlur","showsVerticalScrollIndicator","dropdownPosition","flatListProps","alwaysRenderItemSelected","searchQuery","ref","visible","setVisible","currentValue","setCurrentValue","listData","setListData","Math","random","key","setKey","position","setPosition","focus","setFocus","keyboardHeight","setKeyboardHeight","Dimensions","get","W","width","H","height","styleContainerVertical","alignItems","styleHorizontal","marginBottom","alignSelf","open","eventOpen","close","eventClose","font","onKeyboardDidShow","e","_measure","endCoordinates","onKeyboardDidHide","susbcriptionKeyboardDidShow","Keyboard","addListener","susbcriptionKeyboardDidHide","remove","removeListener","getValue","showOrClose","onSelect","item","onSearch","index","findIndex","_","splice","length","push","_renderDropdown","styles","dropdown","textItem","icon","tintColor","checkSelected","_renderItem","text","defaultFilterFunction","toLowerCase","replace","normalize","indexOf","propSearchFunction","labelText","dataSearch","filter","renderSearch","input","_renderListTop","flex","toString","_renderListBottom","_renderModal","isFull","w","top","bottom","left","styleVertical","isTopPosition","topHeight","keyboardStyle","justifyContent","container","current","measure","px","py","fx","fy","floor","I18nManager","isRTL","unSelect","_renderItemSelected","list","check","flexDirection","flexWrap","map","selectedItem","fontSize","color","selectedTextItem","_renderInside","_renderDropdownInside","dropdownInside"],"sources":["index.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport {\n  Dimensions, FlatList,\n  Image, Keyboard, Modal, Text, TouchableOpacity,\n  TouchableWithoutFeedback,\n  View,\n  ViewStyle,\n  KeyboardEvent,\n  I18nManager\n} from 'react-native';\nimport CInput from '../TextInput';\nimport { useDeviceOrientation } from '../../useDeviceOrientation';\nimport { useDetectDevice } from '../../toolkits';\nimport { styles } from './styles';\nimport { MultiSelectProps } from './model';\nimport _ from 'lodash';\n\nconst { isTablet, isIOS } = useDetectDevice;\nconst ic_down = require('../../assets/down.png');\n\nconst defaultProps = {\n  placeholder: 'Select item',\n  activeColor: '#F6F7F8',\n  backgroundColor: 'white',\n  data: [],\n  style: {},\n}\n\nconst MultiSelectComponent = React.forwardRef<any, MultiSelectProps>((props, currentRef) => {\n  const orientation = useDeviceOrientation();\n  const {\n    onChange,\n    data,\n    value,\n    style,\n    labelField,\n    valueField,\n    selectedStyle,\n    selectedTextStyle,\n    iconStyle,\n    activeColor,\n    containerStyle,\n    fontFamily,\n    placeholderStyle,\n    iconColor = \"gray\",\n    inputSearchStyle,\n    searchPlaceholder,\n    placeholder,\n    search = false,\n    maxHeight = 340,\n    maxSelect,\n    disable = false,\n    keyboardAvoiding = true,\n    inside = false,\n    renderItem,\n    renderLeftIcon,\n    renderRightIcon,\n    renderSelectedItem,\n    renderInputSearch,\n    onFocus,\n    onBlur,\n    showsVerticalScrollIndicator = true,\n    dropdownPosition = 'auto',\n    flatListProps,\n    alwaysRenderItemSelected = false,\n    searchQuery\n  } = props;\n\n  const ref = useRef<View>(null);\n  const [visible, setVisible] = useState<boolean>(false);\n  const [currentValue, setCurrentValue] = useState<any[]>([]);\n  const [listData, setListData] = useState<any[]>(data);\n  const [key, setKey] = useState<number>(Math.random());\n  const [position, setPosition] = useState<any>();\n  const [focus, setFocus] = useState<boolean>(false);\n  const [keyboardHeight, setKeyboardHeight] = useState<number>(0);\n  const { width: W, height: H } = Dimensions.get('window');\n  const styleContainerVertical: ViewStyle = { backgroundColor: 'rgba(0,0,0,0.1)', alignItems: 'center' };\n  const styleHorizontal: ViewStyle = { marginBottom: 20, width: W / 2, alignSelf: 'center' };\n\n  useImperativeHandle(currentRef, () => {\n    return { open: eventOpen, close: eventClose };\n  });\n\n  useEffect(() => {\n    setListData([...data]);\n  }, [data]);\n\n  const eventOpen = () => {\n    if (!disable) {\n      setVisible(true);\n      if (onFocus) {\n        onFocus();\n      }\n    }\n  }\n\n  const eventClose = () => {\n    if (!disable) {\n      setVisible(false);\n      if (onBlur) {\n        onBlur();\n      }\n    }\n  }\n\n  const font = () => {\n    if (fontFamily) {\n      return {\n        fontFamily: fontFamily\n      }\n    } else {\n      return {}\n    }\n  };\n\n  const onKeyboardDidShow = (e: KeyboardEvent) => {\n    _measure();\n    setKeyboardHeight(e.endCoordinates.height + (isIOS ? 0 : 50));\n  };\n\n  const onKeyboardDidHide = () => {\n    setKeyboardHeight(0);\n  };\n\n  useEffect(() => {\n    const susbcriptionKeyboardDidShow = Keyboard.addListener('keyboardDidShow', onKeyboardDidShow);\n    const susbcriptionKeyboardDidHide = Keyboard.addListener('keyboardDidHide', onKeyboardDidHide);\n\n    return () => {\n      if (typeof susbcriptionKeyboardDidShow?.remove === 'function') {\n        susbcriptionKeyboardDidShow.remove();\n      } else {\n        Keyboard.removeListener('keyboardDidShow', onKeyboardDidShow);\n      }\n\n      if (typeof susbcriptionKeyboardDidHide?.remove === 'function') {\n        susbcriptionKeyboardDidHide.remove();\n      } else {\n        Keyboard.removeListener('keyboardDidHide', onKeyboardDidHide);\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    getValue();\n  }, [value]);\n\n  const getValue = () => {\n    setCurrentValue(value ? [...value] : []);\n  };\n\n  const showOrClose = () => {\n    if (!disable) {\n      _measure();\n      setVisible(!visible);\n      setListData(data);\n\n      if (!visible) {\n        if (onFocus) {\n          onFocus();\n        }\n      } else {\n        if (onBlur) {\n          onBlur();\n        }\n      }\n    }\n  };\n\n  const onSelect = (item: any) => {\n    onSearch('');\n\n    const index = currentValue.findIndex(e => e === _.get(item, valueField));\n    if (index > -1) {\n      currentValue.splice(index, 1);\n    } else {\n      if (maxSelect) {\n        if (currentValue.length < maxSelect) {\n          currentValue.push(_.get(item, valueField));\n        }\n      } else {\n        currentValue.push(_.get(item, valueField));\n      }\n\n    }\n    onChange(currentValue);\n    setKey(Math.random());\n  };\n\n  const _renderDropdown = () => {\n    return (\n      <TouchableWithoutFeedback onPress={showOrClose}>\n        <View style={styles.dropdown}>\n          {renderLeftIcon?.()}\n          <Text style={[styles.textItem, placeholderStyle, font()]}>\n            {placeholder}\n          </Text>\n          {renderRightIcon ? renderRightIcon() : <Image source={ic_down} style={[styles.icon, { tintColor: iconColor }, iconStyle]} />}\n        </View>\n      </TouchableWithoutFeedback>\n    )\n  };\n\n  const checkSelected = (item: any) => {\n    const index = currentValue.findIndex(e => e === _.get(item, valueField));\n    return index > -1;\n  };\n\n  const _renderItem = ({ item, index }: { item: any; index: number }) => {\n    return (\n      <TouchableOpacity key={index} onPress={() => onSelect(item)} style={[checkSelected(item) && { backgroundColor: activeColor, marginBottom: 0.5 }]}>\n        {renderItem ? renderItem(item) : <View style={styles.item}>\n          <Text style={[styles.textItem, placeholderStyle, font()]}>{_.get(item, labelField)}</Text>\n        </View>}\n      </TouchableOpacity>\n    );\n  };\n\n  const onSearch = (text: string) => {\n    if (text.length > 0) {\n      const defaultFilterFunction = (e: any) => {\n        const item = _.get(e, labelField)?.toLowerCase().replace(' ', '').normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n        const key = text.toLowerCase().replace(' ', '').normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n\n        return item.indexOf(key) >= 0\n      }\n\n      const propSearchFunction = (e: any) => {\n        const labelText = _.get(e, labelField);\n\n        return searchQuery?.(text, labelText);\n      }\n\n      const dataSearch = data.filter(searchQuery ? propSearchFunction : defaultFilterFunction);\n      setListData(dataSearch);\n    } else {\n      setListData(data);\n    }\n  };\n\n\n  const renderSearch = () => {\n    if (search) {\n      if (renderInputSearch) {\n        return renderInputSearch((text) => { onSearch(text) });\n      } else {\n        return <CInput\n          style={[styles.input, inputSearchStyle]}\n          inputStyle={[inputSearchStyle, font()]}\n          autoCorrect={false}\n          keyboardType={isIOS ? 'default' : 'visible-password'}\n          placeholder={searchPlaceholder}\n          onChangeText={onSearch}\n          placeholderTextColor=\"gray\"\n          iconStyle={[{ tintColor: iconColor }, iconStyle]}\n          onFocus={() => setFocus(true)}\n          onBlur={() => { setFocus(false) }}\n        />\n      }\n    }\n    return null;\n  }\n\n  const _renderListTop = () => {\n    return <TouchableWithoutFeedback><View style={{ flex: 1 }}>\n      <FlatList\n        {...flatListProps}\n        keyboardShouldPersistTaps=\"handled\"\n        data={listData}\n        inverted\n        renderItem={_renderItem}\n        keyExtractor={(item, index) => index.toString()}\n        showsVerticalScrollIndicator={showsVerticalScrollIndicator}\n      />\n      {renderSearch()}\n    </View></TouchableWithoutFeedback>\n  };\n\n\n  const _renderListBottom = () => {\n    return <TouchableWithoutFeedback><View style={{ flex: 1 }}>\n      {renderSearch()}\n      <FlatList\n        {...flatListProps}\n        keyboardShouldPersistTaps=\"handled\"\n        data={listData}\n        renderItem={_renderItem}\n        keyExtractor={(item, index) => index.toString()}\n        showsVerticalScrollIndicator={showsVerticalScrollIndicator}\n      />\n    </View></TouchableWithoutFeedback>\n  };\n\n  const _renderModal = useCallback(() => {\n    if (visible && position) {\n      const {\n        isFull,\n        w,\n        top,\n        bottom,\n        left,\n        height\n      } = position\n      if (w && top && bottom) {\n        const styleVertical: ViewStyle = { left: left, maxHeight: maxHeight };\n        const isTopPosition = dropdownPosition === 'auto' ? bottom < (isIOS ? 200 : 300) : dropdownPosition === 'top' ? true : false;\n        let topHeight = isTopPosition ? top - height : top;\n\n        let keyboardStyle: ViewStyle = {};\n        if (keyboardAvoiding) {\n          if (renderInputSearch) {\n            if (keyboardHeight > 0 && bottom < keyboardHeight + height) {\n              if (isTopPosition) {\n                topHeight = H - keyboardHeight;\n              } else {\n                keyboardStyle = { backgroundColor: 'rgba(0,0,0,0.1)' };\n                topHeight = H - keyboardHeight - 55;\n              }\n            }\n          } else {\n            if (focus && keyboardHeight > 0 && bottom < keyboardHeight + height) {\n              if (isTopPosition) {\n                topHeight = H - keyboardHeight;\n              } else {\n                keyboardStyle = { backgroundColor: 'rgba(0,0,0,0.1)' };\n                topHeight = H - keyboardHeight - 55;\n              }\n            }\n          }\n        }\n\n        return <Modal transparent visible={visible} supportedOrientations={['landscape', 'portrait']} onRequestClose={showOrClose}>\n          <TouchableWithoutFeedback onPress={showOrClose}>\n            <View style={[{ flex: 1 }, isFull && styleContainerVertical, keyboardStyle]}>\n              <View style={{ height: topHeight, width: w, justifyContent: 'flex-end' }}>\n                {isTopPosition && <View style={[{ width: w }, styles.container, containerStyle, isFull ? styleHorizontal : styleVertical]}>\n                  {_renderListTop()}\n                </View>}\n              </View>\n              <View style={{ flex: 1 }}>\n                {!isTopPosition && <View style={[{ width: w }, styles.container, containerStyle, isFull ? styleHorizontal : styleVertical]}>\n                  {_renderListBottom()}\n                </View>}\n              </View>\n            </View>\n          </TouchableWithoutFeedback>\n        </Modal>\n      }\n      return null;\n    }\n    return null;\n  }, [focus, position, visible, keyboardHeight, listData, currentValue]);\n\n  const _measure = () => {\n    if (ref && ref?.current) {\n      ref.current.measure((width, height, px, py, fx, fy) => {\n        const isFull = orientation === 'LANDSCAPE' && !isTablet;\n        const w = Math.floor(px);\n        const top = isFull ? 20 : Math.floor(py) + Math.floor(fy) + 2;\n        const bottom = H - top;\n        const left = I18nManager.isRTL ? W - Math.floor(px) - Math.floor(fx) : Math.floor(fx);\n\n        setPosition({\n          isFull,\n          w,\n          top,\n          bottom: Math.floor(bottom),\n          left,\n          height: Math.floor(py)\n        });\n      })\n    }\n  };\n\n  const unSelect = (item: any) => {\n    if (!disable) {\n      onSelect(item);\n    }\n  };\n\n  const _renderItemSelected = (inside: boolean) => {\n    const list = data.filter((e: any) => {\n      const check = value?.indexOf(_.get(e, valueField));\n      if (check !== -1) {\n        return e;\n      }\n    });\n\n    return (\n      <View style={[{ flexDirection: 'row', flexWrap: 'wrap' }, inside && { flex: 1 }]}>\n        {list.map(e => {\n          if (renderSelectedItem) {\n            return <TouchableOpacity\n              key={_.get(e, labelField)}\n              onPress={() => unSelect(e)}\n            >\n              {renderSelectedItem(e, () => { unSelect(e) })}\n            </TouchableOpacity>\n          } else {\n            return (\n              <TouchableOpacity\n                key={_.get(e, labelField)}\n                style={[styles.selectedItem, selectedStyle]}\n                onPress={() => unSelect(e)}\n              >\n                <Text style={[{ fontSize: 12, color: 'gray' }, selectedTextStyle, font()]}>{_.get(e, labelField)}</Text>\n                <Text style={[styles.selectedTextItem, selectedTextStyle]}>â“§</Text>\n              </TouchableOpacity>\n            )\n          }\n        })}\n      </View>)\n  };\n\n\n  const _renderInside = () => {\n    return <View style={[{ justifyContent: 'center' }, style]} ref={ref} onLayout={_measure}>\n      {_renderDropdownInside()}\n      {_renderModal()}\n    </View>\n  }\n\n  const _renderDropdownInside = () => {\n    return (\n      <TouchableWithoutFeedback onPress={showOrClose}>\n        <View style={styles.dropdownInside}>\n          {renderLeftIcon?.()}\n          {value && value?.length > 0 ? _renderItemSelected(true) :\n            <Text style={[styles.textItem, placeholderStyle, font()]}>\n              {placeholder}\n            </Text>}\n          {renderRightIcon ? renderRightIcon() : <Image source={ic_down} style={[styles.icon, { tintColor: iconColor }, iconStyle]} />}\n        </View>\n      </TouchableWithoutFeedback>\n    )\n  };\n\n  if (inside) {\n    return _renderInside();\n  }\n\n  return (\n    <>\n      <View style={[{ justifyContent: 'center' }, style]} ref={ref} onLayout={_measure}>\n        {_renderDropdown()}\n        {_renderModal()}\n      </View>\n      {(!visible || alwaysRenderItemSelected) && _renderItemSelected(false)}\n    </>\n  );\n});\n\nMultiSelectComponent.defaultProps = defaultProps;\n\nexport default MultiSelectComponent;\n\n"],"mappings":"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"}