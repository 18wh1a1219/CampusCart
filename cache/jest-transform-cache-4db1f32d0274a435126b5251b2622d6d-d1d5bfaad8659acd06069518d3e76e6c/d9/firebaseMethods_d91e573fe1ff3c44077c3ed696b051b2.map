{"version":3,"names":["registration","email","password","fullName","phone","address","firebase","auth","createUserWithEmailAndPassword","then","userCredential","user","sendEmailVerification","Alert","alert","currentUser","db","firestore","collection","doc","uid","set","count","rating","signOut","message","post","productName","desc","price","image","category","userName","userRating","filename","substring","lastIndexOf","uploadUri","replace","formData","FormData","Promise","resolve","reject","xhr","XMLHttpRequest","onload","response","onerror","TypeError","responseType","open","send","blob","ref","storage","child","task","put","contentType","on","snapshot","console","log","totalBytes","err","getDownloadURL","downloadURL","newDocRef","createdAt","Date","toLocaleString","userId","status","buyer","id","signIn","signInWithEmailAndPassword","authUser","emailVerified","loggingOut"],"sources":["firebaseMethods.js"],"sourcesContent":["\r\nimport firebase from 'firebase';\r\nimport {Alert} from \"react-native\";\r\nexport async function registration(email, password, fullName, phone, address) {\r\n  try {\r\n    await firebase.auth().createUserWithEmailAndPassword(email, password).then((userCredential)=>{\r\n    userCredential.user.sendEmailVerification();\r\n    Alert.alert(\"Email sent\");\r\n    });\r\n    const currentUser = firebase.auth().currentUser;\r\n    const db = firebase.firestore();\r\n    db.collection(\"users\")\r\n      .doc(currentUser.uid)\r\n      .set({\r\n        uid: currentUser.uid,\r\n        email: currentUser.email,\r\n        fullName: fullName,\r\n        phone: phone,\r\n        count: 0,\r\n        rating: 0,\r\n        address: address\r\n      });\r\n    firebase.auth().signOut();\r\n  } catch (err) {\r\n    Alert.alert(\"There is something wrong!!!!\", err.message);\r\n  }\r\n}\r\n\r\n\r\nexport async function post(productName, desc, price, image, category, userName, userRating) {\r\n  try {\r\n    const currentUser = firebase.auth().currentUser;\r\n    const filename = image.substring(image.lastIndexOf('/') + 1);\r\n    const uploadUri =  image.replace('file://', '');let formData = new FormData();\r\n    const blob = await new Promise((resolve, reject) => {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.onload = function() {\r\n      resolve(xhr.response);\r\n  };\r\n  xhr.onerror = function() {\r\n    reject(new TypeError(\"Network request failed\"));\r\n  };\r\n  xhr.responseType = \"blob\";\r\n  xhr.open(\"GET\", image, true);\r\n  xhr.send(null);\r\n});\r\n  const ref = firebase.storage().ref().child(filename);\r\n  const task = ref.put(blob, { contentType: 'image/jpg' });\r\n  task.on('state_changed', \r\n  (snapshot) => {\r\n    console.log(snapshot.totalBytes)\r\n  }, \r\n  (err) => {\r\n    console.log(err)\r\n  }, \r\n  () => {\r\n    task.snapshot.ref.getDownloadURL().then((downloadURL) => {\r\n      var newDocRef = firebase.firestore().collection('posts').doc();\r\n      newDocRef.set({\r\n                  productName: productName,\r\n                  desc: desc,\r\n                  price: price,\r\n                  image: downloadURL,\r\n                  category: category,\r\n                  createdAt: new Date().toLocaleString(),\r\n                  userId: firebase.auth().currentUser.uid,\r\n                  userName: userName,\r\n                  status: \"available\",\r\n                  buyer: \"\",\r\n                  rating:0,\r\n                 id: newDocRef.id,\r\n                 userRating: userRating\r\n          })\r\n  });\r\n})\r\n} catch(err) {\r\n console.log(err)\r\n}\r\n}\r\n\r\n\r\nexport async function signIn(email, password) {\r\n  try{\r\n    await firebase.auth().signInWithEmailAndPassword(email, password ).then(authUser => {\r\n    if(authUser.user.emailVerified){ \r\n    } else{\r\n      firebase.auth().signOut();\r\n      Alert.alert('email not verified');\r\n    }\r\n    })\r\n  } catch (err) {\r\n    Alert.alert(\"There is something wrong!\", err.message);\r\n  }\r\n}\r\n\r\nexport async function loggingOut() {\r\n  try {\r\n    await firebase.auth().signOut();\r\n  } catch (err) {\r\n    Alert.alert('There is something wrong!', err.message);\r\n  }\r\n}"],"mappings":";;;;;;;;;;;;AACA;;AACA;;AACO,SAAeA,YAAf,CAA4BC,KAA5B,EAAmCC,QAAnC,EAA6CC,QAA7C,EAAuDC,KAAvD,EAA8DC,OAA9D;EAAA;EAAA;IAAA;MAAA;QAAA;UAAA;UAAA;UAAA,kCAEGC,kBAASC,IAAT,GAAgBC,8BAAhB,CAA+CP,KAA/C,EAAsDC,QAAtD,EAAgEO,IAAhE,CAAqE,UAACC,cAAD,EAAkB;YAC7FA,cAAc,CAACC,IAAf,CAAoBC,qBAApB;;YACAC,mBAAMC,KAAN,CAAY,YAAZ;UACC,CAHK,CAFH;;QAAA;UAMGC,WANH,GAMiBT,kBAASC,IAAT,GAAgBQ,WANjC;UAOGC,EAPH,GAOQV,kBAASW,SAAT,EAPR;UAQHD,EAAE,CAACE,UAAH,CAAc,OAAd,EACGC,GADH,CACOJ,WAAW,CAACK,GADnB,EAEGC,GAFH,CAEO;YACHD,GAAG,EAAEL,WAAW,CAACK,GADd;YAEHnB,KAAK,EAAEc,WAAW,CAACd,KAFhB;YAGHE,QAAQ,EAAEA,QAHP;YAIHC,KAAK,EAAEA,KAJJ;YAKHkB,KAAK,EAAE,CALJ;YAMHC,MAAM,EAAE,CANL;YAOHlB,OAAO,EAAEA;UAPN,CAFP;;UAWAC,kBAASC,IAAT,GAAgBiB,OAAhB;;UAnBG;UAAA;;QAAA;UAAA;UAAA;;UAqBHX,mBAAMC,KAAN,CAAY,8BAAZ,EAA4C,YAAIW,OAAhD;;QArBG;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA;;AA0BA,SAAeC,IAAf,CAAoBC,WAApB,EAAiCC,IAAjC,EAAuCC,KAAvC,EAA8CC,KAA9C,EAAqDC,QAArD,EAA+DC,QAA/D,EAAyEC,UAAzE;EAAA;EAAA;IAAA;MAAA;QAAA;UAAA;UAEGlB,WAFH,GAEiBT,kBAASC,IAAT,GAAgBQ,WAFjC;UAGGmB,QAHH,GAGcJ,KAAK,CAACK,SAAN,CAAgBL,KAAK,CAACM,WAAN,CAAkB,GAAlB,IAAyB,CAAzC,CAHd;UAIGC,SAJH,GAIgBP,KAAK,CAACQ,OAAN,CAAc,SAAd,EAAyB,EAAzB,CAJhB;UAIiDC,QAJjD,GAI4D,IAAIC,QAAJ,EAJ5D;UAAA;UAAA,kCAKgB,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;YACpD,IAAMC,GAAG,GAAG,IAAIC,cAAJ,EAAZ;;YACAD,GAAG,CAACE,MAAJ,GAAa,YAAW;cACtBJ,OAAO,CAACE,GAAG,CAACG,QAAL,CAAP;YACH,CAFC;;YAGFH,GAAG,CAACI,OAAJ,GAAc,YAAW;cACvBL,MAAM,CAAC,IAAIM,SAAJ,CAAc,wBAAd,CAAD,CAAN;YACD,CAFD;;YAGAL,GAAG,CAACM,YAAJ,GAAmB,MAAnB;YACAN,GAAG,CAACO,IAAJ,CAAS,KAAT,EAAgBrB,KAAhB,EAAuB,IAAvB;YACAc,GAAG,CAACQ,IAAJ,CAAS,IAAT;UACD,CAXsB,CALhB;;QAAA;UAKGC,IALH;UAiBCC,GAjBD,GAiBOhD,kBAASiD,OAAT,GAAmBD,GAAnB,GAAyBE,KAAzB,CAA+BtB,QAA/B,CAjBP;UAkBCuB,IAlBD,GAkBQH,GAAG,CAACI,GAAJ,CAAQL,IAAR,EAAc;YAAEM,WAAW,EAAE;UAAf,CAAd,CAlBR;UAmBLF,IAAI,CAACG,EAAL,CAAQ,eAAR,EACA,UAACC,QAAD,EAAc;YACZC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,UAArB;UACD,CAHD,EAIA,UAACC,GAAD,EAAS;YACPH,OAAO,CAACC,GAAR,CAAYE,GAAZ;UACD,CAND,EAOA,YAAM;YACJR,IAAI,CAACI,QAAL,CAAcP,GAAd,CAAkBY,cAAlB,GAAmCzD,IAAnC,CAAwC,UAAC0D,WAAD,EAAiB;cACvD,IAAIC,SAAS,GAAG9D,kBAASW,SAAT,GAAqBC,UAArB,CAAgC,OAAhC,EAAyCC,GAAzC,EAAhB;;cACAiD,SAAS,CAAC/C,GAAV,CAAc;gBACFM,WAAW,EAAEA,WADX;gBAEFC,IAAI,EAAEA,IAFJ;gBAGFC,KAAK,EAAEA,KAHL;gBAIFC,KAAK,EAAEqC,WAJL;gBAKFpC,QAAQ,EAAEA,QALR;gBAMFsC,SAAS,EAAE,IAAIC,IAAJ,GAAWC,cAAX,EANT;gBAOFC,MAAM,EAAElE,kBAASC,IAAT,GAAgBQ,WAAhB,CAA4BK,GAPlC;gBAQFY,QAAQ,EAAEA,QARR;gBASFyC,MAAM,EAAE,WATN;gBAUFC,KAAK,EAAE,EAVL;gBAWFnD,MAAM,EAAC,CAXL;gBAYHoD,EAAE,EAAEP,SAAS,CAACO,EAZX;gBAaH1C,UAAU,EAAEA;cAbT,CAAd;YAeH,CAjBC;UAkBH,CA1BC;UAnBK;UAAA;;QAAA;UAAA;UAAA;UA+CN6B,OAAO,CAACC,GAAR;;QA/CM;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA;;AAoDA,SAAea,MAAf,CAAsB3E,KAAtB,EAA6BC,QAA7B;EAAA;IAAA;MAAA;QAAA;UAAA;UAAA;UAAA,kCAEGI,kBAASC,IAAT,GAAgBsE,0BAAhB,CAA2C5E,KAA3C,EAAkDC,QAAlD,EAA6DO,IAA7D,CAAkE,UAAAqE,QAAQ,EAAI;YACpF,IAAGA,QAAQ,CAACnE,IAAT,CAAcoE,aAAjB,EAA+B,CAC9B,CADD,MACM;cACJzE,kBAASC,IAAT,GAAgBiB,OAAhB;;cACAX,mBAAMC,KAAN,CAAY,oBAAZ;YACD;UACA,CANK,CAFH;;QAAA;UAAA;UAAA;;QAAA;UAAA;UAAA;;UAUHD,mBAAMC,KAAN,CAAY,2BAAZ,EAAyC,aAAIW,OAA7C;;QAVG;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA;;AAcA,SAAeuD,UAAf;EAAA;IAAA;MAAA;QAAA;UAAA;UAAA;UAAA,kCAEG1E,kBAASC,IAAT,GAAgBiB,OAAhB,EAFH;;QAAA;UAAA;UAAA;;QAAA;UAAA;UAAA;;UAIHX,mBAAMC,KAAN,CAAY,2BAAZ,EAAyC,aAAIW,OAA7C;;QAJG;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA"}