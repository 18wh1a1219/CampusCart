e87aa446aaeddf463c6106e68b94b894
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _invariant = _interopRequireDefault(require("invariant"));

var oneArgumentPooler = function oneArgumentPooler(copyFieldsFrom) {
  var Klass = this;

  if (Klass.instancePool.length) {
    var _instance = Klass.instancePool.pop();

    Klass.call(_instance, copyFieldsFrom);
    return _instance;
  } else {
    return new Klass(copyFieldsFrom);
  }
};

var twoArgumentPooler = function twoArgumentPooler(a1, a2) {
  var Klass = this;

  if (Klass.instancePool.length) {
    var _instance2 = Klass.instancePool.pop();

    Klass.call(_instance2, a1, a2);
    return _instance2;
  } else {
    return new Klass(a1, a2);
  }
};

var threeArgumentPooler = function threeArgumentPooler(a1, a2, a3) {
  var Klass = this;

  if (Klass.instancePool.length) {
    var _instance3 = Klass.instancePool.pop();

    Klass.call(_instance3, a1, a2, a3);
    return _instance3;
  } else {
    return new Klass(a1, a2, a3);
  }
};

var fourArgumentPooler = function fourArgumentPooler(a1, a2, a3, a4) {
  var Klass = this;

  if (Klass.instancePool.length) {
    var _instance4 = Klass.instancePool.pop();

    Klass.call(_instance4, a1, a2, a3, a4);
    return _instance4;
  } else {
    return new Klass(a1, a2, a3, a4);
  }
};

var standardReleaser = function standardReleaser(instance) {
  var Klass = this;
  (0, _invariant.default)(instance instanceof Klass, 'Trying to release an instance into a pool of a different type.');
  instance.destructor();

  if (Klass.instancePool.length < Klass.poolSize) {
    Klass.instancePool.push(instance);
  }
};

var DEFAULT_POOL_SIZE = 10;
var DEFAULT_POOLER = oneArgumentPooler;

var addPoolingTo = function addPoolingTo(CopyConstructor, pooler) {
  var NewKlass = CopyConstructor;
  NewKlass.instancePool = [];
  NewKlass.getPooled = pooler || DEFAULT_POOLER;

  if (!NewKlass.poolSize) {
    NewKlass.poolSize = DEFAULT_POOL_SIZE;
  }

  NewKlass.release = standardReleaser;
  return NewKlass;
};

var PooledClass = {
  addPoolingTo: addPoolingTo,
  oneArgumentPooler: oneArgumentPooler,
  twoArgumentPooler: twoArgumentPooler,
  threeArgumentPooler: threeArgumentPooler,
  fourArgumentPooler: fourArgumentPooler
};
module.exports = PooledClass;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvbmVBcmd1bWVudFBvb2xlciIsImNvcHlGaWVsZHNGcm9tIiwiS2xhc3MiLCJpbnN0YW5jZVBvb2wiLCJsZW5ndGgiLCJpbnN0YW5jZSIsInBvcCIsImNhbGwiLCJ0d29Bcmd1bWVudFBvb2xlciIsImExIiwiYTIiLCJ0aHJlZUFyZ3VtZW50UG9vbGVyIiwiYTMiLCJmb3VyQXJndW1lbnRQb29sZXIiLCJhNCIsInN0YW5kYXJkUmVsZWFzZXIiLCJkZXN0cnVjdG9yIiwicG9vbFNpemUiLCJwdXNoIiwiREVGQVVMVF9QT09MX1NJWkUiLCJERUZBVUxUX1BPT0xFUiIsImFkZFBvb2xpbmdUbyIsIkNvcHlDb25zdHJ1Y3RvciIsInBvb2xlciIsIk5ld0tsYXNzIiwiZ2V0UG9vbGVkIiwicmVsZWFzZSIsIlBvb2xlZENsYXNzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIlBvb2xlZENsYXNzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZm9ybWF0XG4gKiBAZmxvd1xuICovXG5cbid1c2Ugc3RyaWN0JztcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnaW52YXJpYW50JztcblxuLyoqXG4gKiBTdGF0aWMgcG9vbGVycy4gU2V2ZXJhbCBjdXN0b20gdmVyc2lvbnMgZm9yIGVhY2ggcG90ZW50aWFsIG51bWJlciBvZlxuICogYXJndW1lbnRzLiBBIGNvbXBsZXRlbHkgZ2VuZXJpYyBwb29sZXIgaXMgZWFzeSB0byBpbXBsZW1lbnQsIGJ1dCB3b3VsZFxuICogcmVxdWlyZSBhY2Nlc3NpbmcgdGhlIGBhcmd1bWVudHNgIG9iamVjdC4gSW4gZWFjaCBvZiB0aGVzZSwgYHRoaXNgIHJlZmVycyB0b1xuICogdGhlIENsYXNzIGl0c2VsZiwgbm90IGFuIGluc3RhbmNlLiBJZiBhbnkgb3RoZXJzIGFyZSBuZWVkZWQsIHNpbXBseSBhZGQgdGhlbVxuICogaGVyZSwgb3IgaW4gdGhlaXIgb3duIGZpbGVzLlxuICovXG5jb25zdCBvbmVBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChjb3B5RmllbGRzRnJvbSkge1xuICBjb25zdCBLbGFzcyA9IHRoaXM7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY29uc2lzdGVudC10aGlzXG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgY29weUZpZWxkc0Zyb20pO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGNvcHlGaWVsZHNGcm9tKTtcbiAgfVxufTtcblxuY29uc3QgdHdvQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbiAoYTEsIGEyKSB7XG4gIGNvbnN0IEtsYXNzID0gdGhpczsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBjb25zaXN0ZW50LXRoaXNcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IEtsYXNzLmluc3RhbmNlUG9vbC5wb3AoKTtcbiAgICBLbGFzcy5jYWxsKGluc3RhbmNlLCBhMSwgYTIpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMik7XG4gIH1cbn07XG5cbmNvbnN0IHRocmVlQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbiAoYTEsIGEyLCBhMykge1xuICBjb25zdCBLbGFzcyA9IHRoaXM7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY29uc2lzdGVudC10aGlzXG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMyk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgS2xhc3MoYTEsIGEyLCBhMyk7XG4gIH1cbn07XG5cbmNvbnN0IGZvdXJBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChhMSwgYTIsIGEzLCBhNCkge1xuICBjb25zdCBLbGFzcyA9IHRoaXM7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY29uc2lzdGVudC10aGlzXG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMywgYTQpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMiwgYTMsIGE0KTtcbiAgfVxufTtcblxuY29uc3Qgc3RhbmRhcmRSZWxlYXNlciA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICBjb25zdCBLbGFzcyA9IHRoaXM7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY29uc2lzdGVudC10aGlzXG4gIGludmFyaWFudChcbiAgICBpbnN0YW5jZSBpbnN0YW5jZW9mIEtsYXNzLFxuICAgICdUcnlpbmcgdG8gcmVsZWFzZSBhbiBpbnN0YW5jZSBpbnRvIGEgcG9vbCBvZiBhIGRpZmZlcmVudCB0eXBlLicsXG4gICk7XG4gIGluc3RhbmNlLmRlc3RydWN0b3IoKTtcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGggPCBLbGFzcy5wb29sU2l6ZSkge1xuICAgIEtsYXNzLmluc3RhbmNlUG9vbC5wdXNoKGluc3RhbmNlKTtcbiAgfVxufTtcblxuY29uc3QgREVGQVVMVF9QT09MX1NJWkUgPSAxMDtcbmNvbnN0IERFRkFVTFRfUE9PTEVSID0gb25lQXJndW1lbnRQb29sZXI7XG5cbnR5cGUgUG9vbGVyID0gYW55O1xuXG4vKipcbiAqIEF1Z21lbnRzIGBDb3B5Q29uc3RydWN0b3JgIHRvIGJlIGEgcG9vbGFibGUgY2xhc3MsIGF1Z21lbnRpbmcgb25seSB0aGUgY2xhc3NcbiAqIGl0c2VsZiAoc3RhdGljYWxseSkgbm90IGFkZGluZyBhbnkgcHJvdG90eXBpY2FsIGZpZWxkcy4gQW55IENvcHlDb25zdHJ1Y3RvclxuICogeW91IGdpdmUgdGhpcyBtYXkgaGF2ZSBhIGBwb29sU2l6ZWAgcHJvcGVydHksIGFuZCB3aWxsIGxvb2sgZm9yIGFcbiAqIHByb3RvdHlwaWNhbCBgZGVzdHJ1Y3RvcmAgb24gaW5zdGFuY2VzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IENvcHlDb25zdHJ1Y3RvciBDb25zdHJ1Y3RvciB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlc2V0LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcG9vbGVyIEN1c3RvbWl6YWJsZSBwb29sZXIuXG4gKi9cbmNvbnN0IGFkZFBvb2xpbmdUbyA9IGZ1bmN0aW9uIDxUPihcbiAgQ29weUNvbnN0cnVjdG9yOiBDbGFzczxUPixcbiAgcG9vbGVyOiBQb29sZXIsXG4pOiBDbGFzczxUPiAmIHtcbiAgZ2V0UG9vbGVkKFxuICAgIC4uLmFyZ3M6ICRSZWFkT25seUFycmF5PG1peGVkPlxuICApOiAvKiBhcmd1bWVudHMgb2YgdGhlIGNvbnN0cnVjdG9yICovIFQsXG4gIHJlbGVhc2UoaW5zdGFuY2U6IG1peGVkKTogdm9pZCxcbiAgLi4uXG59IHtcbiAgLy8gQ2FzdGluZyBhcyBhbnkgc28gdGhhdCBmbG93IGlnbm9yZXMgdGhlIGFjdHVhbCBpbXBsZW1lbnRhdGlvbiBhbmQgdHJ1c3RzXG4gIC8vIGl0IHRvIG1hdGNoIHRoZSB0eXBlIHdlIGRlY2xhcmVkXG4gIGNvbnN0IE5ld0tsYXNzID0gKENvcHlDb25zdHJ1Y3RvcjogYW55KTtcbiAgTmV3S2xhc3MuaW5zdGFuY2VQb29sID0gW107XG4gIE5ld0tsYXNzLmdldFBvb2xlZCA9IHBvb2xlciB8fCBERUZBVUxUX1BPT0xFUjtcbiAgaWYgKCFOZXdLbGFzcy5wb29sU2l6ZSkge1xuICAgIE5ld0tsYXNzLnBvb2xTaXplID0gREVGQVVMVF9QT09MX1NJWkU7XG4gIH1cbiAgTmV3S2xhc3MucmVsZWFzZSA9IHN0YW5kYXJkUmVsZWFzZXI7XG4gIHJldHVybiBOZXdLbGFzcztcbn07XG5cbmNvbnN0IFBvb2xlZENsYXNzID0ge1xuICBhZGRQb29saW5nVG86IGFkZFBvb2xpbmdUbyxcbiAgb25lQXJndW1lbnRQb29sZXI6IChvbmVBcmd1bWVudFBvb2xlcjogUG9vbGVyKSxcbiAgdHdvQXJndW1lbnRQb29sZXI6ICh0d29Bcmd1bWVudFBvb2xlcjogUG9vbGVyKSxcbiAgdGhyZWVBcmd1bWVudFBvb2xlcjogKHRocmVlQXJndW1lbnRQb29sZXI6IFBvb2xlciksXG4gIGZvdXJBcmd1bWVudFBvb2xlcjogKGZvdXJBcmd1bWVudFBvb2xlcjogUG9vbGVyKSxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUG9vbGVkQ2xhc3M7XG4iXSwibWFwcGluZ3MiOiJBQVVBOzs7O0FBQ0E7O0FBU0EsSUFBTUEsaUJBQWlCLEdBQUcsU0FBcEJBLGlCQUFvQixDQUFVQyxjQUFWLEVBQTBCO0VBQ2xELElBQU1DLEtBQUssR0FBRyxJQUFkOztFQUNBLElBQUlBLEtBQUssQ0FBQ0MsWUFBTixDQUFtQkMsTUFBdkIsRUFBK0I7SUFDN0IsSUFBTUMsU0FBUSxHQUFHSCxLQUFLLENBQUNDLFlBQU4sQ0FBbUJHLEdBQW5CLEVBQWpCOztJQUNBSixLQUFLLENBQUNLLElBQU4sQ0FBV0YsU0FBWCxFQUFxQkosY0FBckI7SUFDQSxPQUFPSSxTQUFQO0VBQ0QsQ0FKRCxNQUlPO0lBQ0wsT0FBTyxJQUFJSCxLQUFKLENBQVVELGNBQVYsQ0FBUDtFQUNEO0FBQ0Ys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