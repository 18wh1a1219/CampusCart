{"version":3,"names":["extractSingleTouch","nativeEvent","touches","changedTouches","hasTouches","length","hasChangedTouches","States","NOT_RESPONDER","RESPONDER_INACTIVE_PRESS_IN","RESPONDER_INACTIVE_PRESS_OUT","RESPONDER_ACTIVE_PRESS_IN","RESPONDER_ACTIVE_PRESS_OUT","RESPONDER_ACTIVE_LONG_PRESS_IN","RESPONDER_ACTIVE_LONG_PRESS_OUT","ERROR","baseStatesConditions","IsActive","IsPressingIn","IsLongPressingIn","Signals","DELAY","RESPONDER_GRANT","RESPONDER_RELEASE","RESPONDER_TERMINATED","ENTER_PRESS_RECT","LEAVE_PRESS_RECT","LONG_PRESS_DETECTED","Transitions","error","HIGHLIGHT_DELAY_MS","PRESS_EXPAND_PX","LONG_PRESS_THRESHOLD","LONG_PRESS_DELAY_MS","LONG_PRESS_ALLOWED_MOVEMENT","TouchableMixin","componentDidMount","Platform","isTV","componentWillUnmount","touchableDelayTimeout","clearTimeout","longPressDelayTimeout","pressOutDelayTimeout","touchableGetInitialState","touchable","touchState","undefined","responderID","touchableHandleResponderTerminationRequest","props","rejectResponderTermination","touchableHandleStartShouldSetResponder","disabled","touchableLongPressCancelsPress","touchableHandleResponderGrant","e","dispatchID","currentTarget","persist","state","_receiveSignal","delayMS","touchableGetHighlightDelayMS","Math","max","isNaN","setTimeout","_handleDelay","bind","longDelayMS","touchableGetLongPressDelayMS","_handleLongDelay","touchableHandleResponderRelease","pressInLocation","touchableHandleResponderTerminate","touchableHandleResponderMove","positionOnActivate","dimensionsOnActivate","pressRectOffset","touchableGetPressRectOffset","left","right","top","bottom","pressExpandLeft","pressExpandTop","pressExpandRight","pressExpandBottom","hitSlop","touchableGetHitSlop","touch","pageX","pageY","movedDistance","_getDistanceBetweenPoints","_cancelLongPressDelayTimeout","isTouchWithinActive","width","height","prevState","curState","touchableHandleFocus","onFocus","touchableHandleBlur","onBlur","_remeasureMetricsOnActivation","UIManager","measure","_handleQueryLayout","l","t","w","h","globalX","globalY","Position","release","BoundingDimensions","getPooled","signal","nextState","Error","_performSideEffectsForTransition","_isHighlight","_savePressInLocation","locationX","locationY","aX","aY","bX","bY","deltaX","deltaY","sqrt","curIsHighlight","newIsHighlight","isFinalSignal","isInitialTransition","isActiveTransition","touchableHandleLongPress","_startHighlight","_endHighlight","hasLongPressHandler","onLongPress","pressIsLongButStillCallOnPress","shouldInvokePress","touchableHandlePress","OS","touchSoundDisabled","SoundManager","playTouchSound","touchableHandleActivePressIn","touchableHandleActivePressOut","touchableGetPressOutDelayMS","withoutDefaultFocusAndBlur","TouchableMixinWithoutDefaultFocusAndBlur","Touchable","Mixin","renderDebugView","color","__DEV__","module","exports"],"sources":["Touchable.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n * @format\n */\n\nimport * as React from 'react';\nimport BoundingDimensions from './BoundingDimensions';\nimport Platform from '../../Utilities/Platform';\nimport Position from './Position';\nimport UIManager from '../../ReactNative/UIManager';\nimport SoundManager from '../Sound/SoundManager';\n\nimport {PressabilityDebugView} from '../../Pressability/PressabilityDebug';\n\nimport type {ColorValue} from '../../StyleSheet/StyleSheet';\nimport type {EdgeInsetsProp} from '../../StyleSheet/EdgeInsetsPropType';\nimport type {PressEvent} from '../../Types/CoreEventTypes';\n\nconst extractSingleTouch = nativeEvent => {\n  const touches = nativeEvent.touches;\n  const changedTouches = nativeEvent.changedTouches;\n  const hasTouches = touches && touches.length > 0;\n  const hasChangedTouches = changedTouches && changedTouches.length > 0;\n\n  return !hasTouches && hasChangedTouches\n    ? changedTouches[0]\n    : hasTouches\n    ? touches[0]\n    : nativeEvent;\n};\n\n/**\n * `Touchable`: Taps done right.\n *\n * You hook your `ResponderEventPlugin` events into `Touchable`. `Touchable`\n * will measure time/geometry and tells you when to give feedback to the user.\n *\n * ====================== Touchable Tutorial ===============================\n * The `Touchable` mixin helps you handle the \"press\" interaction. It analyzes\n * the geometry of elements, and observes when another responder (scroll view\n * etc) has stolen the touch lock. It notifies your component when it should\n * give feedback to the user. (bouncing/highlighting/unhighlighting).\n *\n * - When a touch was activated (typically you highlight)\n * - When a touch was deactivated (typically you unhighlight)\n * - When a touch was \"pressed\" - a touch ended while still within the geometry\n *   of the element, and no other element (like scroller) has \"stolen\" touch\n *   lock (\"responder\") (Typically you bounce the element).\n *\n * A good tap interaction isn't as simple as you might think. There should be a\n * slight delay before showing a highlight when starting a touch. If a\n * subsequent touch move exceeds the boundary of the element, it should\n * unhighlight, but if that same touch is brought back within the boundary, it\n * should rehighlight again. A touch can move in and out of that boundary\n * several times, each time toggling highlighting, but a \"press\" is only\n * triggered if that touch ends while within the element's boundary and no\n * scroller (or anything else) has stolen the lock on touches.\n *\n * To create a new type of component that handles interaction using the\n * `Touchable` mixin, do the following:\n *\n * - Initialize the `Touchable` state.\n *\n *   getInitialState: function() {\n *     return merge(this.touchableGetInitialState(), yourComponentState);\n *   }\n *\n * - Choose the rendered component who's touches should start the interactive\n *   sequence. On that rendered node, forward all `Touchable` responder\n *   handlers. You can choose any rendered node you like. Choose a node whose\n *   hit target you'd like to instigate the interaction sequence:\n *\n *   // In render function:\n *   return (\n *     <View\n *       onStartShouldSetResponder={this.touchableHandleStartShouldSetResponder}\n *       onResponderTerminationRequest={this.touchableHandleResponderTerminationRequest}\n *       onResponderGrant={this.touchableHandleResponderGrant}\n *       onResponderMove={this.touchableHandleResponderMove}\n *       onResponderRelease={this.touchableHandleResponderRelease}\n *       onResponderTerminate={this.touchableHandleResponderTerminate}>\n *       <View>\n *         Even though the hit detection/interactions are triggered by the\n *         wrapping (typically larger) node, we usually end up implementing\n *         custom logic that highlights this inner one.\n *       </View>\n *     </View>\n *   );\n *\n * - You may set up your own handlers for each of these events, so long as you\n *   also invoke the `touchable*` handlers inside of your custom handler.\n *\n * - Implement the handlers on your component class in order to provide\n *   feedback to the user. See documentation for each of these class methods\n *   that you should implement.\n *\n *   touchableHandlePress: function() {\n *      this.performBounceAnimation();  // or whatever you want to do.\n *   },\n *   touchableHandleActivePressIn: function() {\n *     this.beginHighlighting(...);  // Whatever you like to convey activation\n *   },\n *   touchableHandleActivePressOut: function() {\n *     this.endHighlighting(...);  // Whatever you like to convey deactivation\n *   },\n *\n * - There are more advanced methods you can implement (see documentation below):\n *   touchableGetHighlightDelayMS: function() {\n *     return 20;\n *   }\n *   // In practice, *always* use a predeclared constant (conserve memory).\n *   touchableGetPressRectOffset: function() {\n *     return {top: 20, left: 20, right: 20, bottom: 100};\n *   }\n */\n\n/**\n * Touchable states.\n */\n\nconst States = {\n  NOT_RESPONDER: 'NOT_RESPONDER', // Not the responder\n  RESPONDER_INACTIVE_PRESS_IN: 'RESPONDER_INACTIVE_PRESS_IN', // Responder, inactive, in the `PressRect`\n  RESPONDER_INACTIVE_PRESS_OUT: 'RESPONDER_INACTIVE_PRESS_OUT', // Responder, inactive, out of `PressRect`\n  RESPONDER_ACTIVE_PRESS_IN: 'RESPONDER_ACTIVE_PRESS_IN', // Responder, active, in the `PressRect`\n  RESPONDER_ACTIVE_PRESS_OUT: 'RESPONDER_ACTIVE_PRESS_OUT', // Responder, active, out of `PressRect`\n  RESPONDER_ACTIVE_LONG_PRESS_IN: 'RESPONDER_ACTIVE_LONG_PRESS_IN', // Responder, active, in the `PressRect`, after long press threshold\n  RESPONDER_ACTIVE_LONG_PRESS_OUT: 'RESPONDER_ACTIVE_LONG_PRESS_OUT', // Responder, active, out of `PressRect`, after long press threshold\n  ERROR: 'ERROR',\n};\n\ntype State =\n  | typeof States.NOT_RESPONDER\n  | typeof States.RESPONDER_INACTIVE_PRESS_IN\n  | typeof States.RESPONDER_INACTIVE_PRESS_OUT\n  | typeof States.RESPONDER_ACTIVE_PRESS_IN\n  | typeof States.RESPONDER_ACTIVE_PRESS_OUT\n  | typeof States.RESPONDER_ACTIVE_LONG_PRESS_IN\n  | typeof States.RESPONDER_ACTIVE_LONG_PRESS_OUT\n  | typeof States.ERROR;\n\n/*\n * Quick lookup map for states that are considered to be \"active\"\n */\n\nconst baseStatesConditions = {\n  NOT_RESPONDER: false,\n  RESPONDER_INACTIVE_PRESS_IN: false,\n  RESPONDER_INACTIVE_PRESS_OUT: false,\n  RESPONDER_ACTIVE_PRESS_IN: false,\n  RESPONDER_ACTIVE_PRESS_OUT: false,\n  RESPONDER_ACTIVE_LONG_PRESS_IN: false,\n  RESPONDER_ACTIVE_LONG_PRESS_OUT: false,\n  ERROR: false,\n};\n\nconst IsActive = {\n  ...baseStatesConditions,\n  RESPONDER_ACTIVE_PRESS_OUT: true,\n  RESPONDER_ACTIVE_PRESS_IN: true,\n};\n\n/**\n * Quick lookup for states that are considered to be \"pressing\" and are\n * therefore eligible to result in a \"selection\" if the press stops.\n */\nconst IsPressingIn = {\n  ...baseStatesConditions,\n  RESPONDER_INACTIVE_PRESS_IN: true,\n  RESPONDER_ACTIVE_PRESS_IN: true,\n  RESPONDER_ACTIVE_LONG_PRESS_IN: true,\n};\n\nconst IsLongPressingIn = {\n  ...baseStatesConditions,\n  RESPONDER_ACTIVE_LONG_PRESS_IN: true,\n};\n\n/**\n * Inputs to the state machine.\n */\nconst Signals = {\n  DELAY: 'DELAY',\n  RESPONDER_GRANT: 'RESPONDER_GRANT',\n  RESPONDER_RELEASE: 'RESPONDER_RELEASE',\n  RESPONDER_TERMINATED: 'RESPONDER_TERMINATED',\n  ENTER_PRESS_RECT: 'ENTER_PRESS_RECT',\n  LEAVE_PRESS_RECT: 'LEAVE_PRESS_RECT',\n  LONG_PRESS_DETECTED: 'LONG_PRESS_DETECTED',\n};\n\ntype Signal =\n  | typeof Signals.DELAY\n  | typeof Signals.RESPONDER_GRANT\n  | typeof Signals.RESPONDER_RELEASE\n  | typeof Signals.RESPONDER_TERMINATED\n  | typeof Signals.ENTER_PRESS_RECT\n  | typeof Signals.LEAVE_PRESS_RECT\n  | typeof Signals.LONG_PRESS_DETECTED;\n\n/**\n * Mapping from States x Signals => States\n */\nconst Transitions = {\n  NOT_RESPONDER: {\n    DELAY: States.ERROR,\n    RESPONDER_GRANT: States.RESPONDER_INACTIVE_PRESS_IN,\n    RESPONDER_RELEASE: States.ERROR,\n    RESPONDER_TERMINATED: States.ERROR,\n    ENTER_PRESS_RECT: States.ERROR,\n    LEAVE_PRESS_RECT: States.ERROR,\n    LONG_PRESS_DETECTED: States.ERROR,\n  },\n  RESPONDER_INACTIVE_PRESS_IN: {\n    DELAY: States.RESPONDER_ACTIVE_PRESS_IN,\n    RESPONDER_GRANT: States.ERROR,\n    RESPONDER_RELEASE: States.NOT_RESPONDER,\n    RESPONDER_TERMINATED: States.NOT_RESPONDER,\n    ENTER_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_IN,\n    LEAVE_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_OUT,\n    LONG_PRESS_DETECTED: States.ERROR,\n  },\n  RESPONDER_INACTIVE_PRESS_OUT: {\n    DELAY: States.RESPONDER_ACTIVE_PRESS_OUT,\n    RESPONDER_GRANT: States.ERROR,\n    RESPONDER_RELEASE: States.NOT_RESPONDER,\n    RESPONDER_TERMINATED: States.NOT_RESPONDER,\n    ENTER_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_IN,\n    LEAVE_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_OUT,\n    LONG_PRESS_DETECTED: States.ERROR,\n  },\n  RESPONDER_ACTIVE_PRESS_IN: {\n    DELAY: States.ERROR,\n    RESPONDER_GRANT: States.ERROR,\n    RESPONDER_RELEASE: States.NOT_RESPONDER,\n    RESPONDER_TERMINATED: States.NOT_RESPONDER,\n    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_IN,\n    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_OUT,\n    LONG_PRESS_DETECTED: States.RESPONDER_ACTIVE_LONG_PRESS_IN,\n  },\n  RESPONDER_ACTIVE_PRESS_OUT: {\n    DELAY: States.ERROR,\n    RESPONDER_GRANT: States.ERROR,\n    RESPONDER_RELEASE: States.NOT_RESPONDER,\n    RESPONDER_TERMINATED: States.NOT_RESPONDER,\n    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_IN,\n    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_OUT,\n    LONG_PRESS_DETECTED: States.ERROR,\n  },\n  RESPONDER_ACTIVE_LONG_PRESS_IN: {\n    DELAY: States.ERROR,\n    RESPONDER_GRANT: States.ERROR,\n    RESPONDER_RELEASE: States.NOT_RESPONDER,\n    RESPONDER_TERMINATED: States.NOT_RESPONDER,\n    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_IN,\n    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_OUT,\n    LONG_PRESS_DETECTED: States.RESPONDER_ACTIVE_LONG_PRESS_IN,\n  },\n  RESPONDER_ACTIVE_LONG_PRESS_OUT: {\n    DELAY: States.ERROR,\n    RESPONDER_GRANT: States.ERROR,\n    RESPONDER_RELEASE: States.NOT_RESPONDER,\n    RESPONDER_TERMINATED: States.NOT_RESPONDER,\n    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_IN,\n    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_OUT,\n    LONG_PRESS_DETECTED: States.ERROR,\n  },\n  error: {\n    DELAY: States.NOT_RESPONDER,\n    RESPONDER_GRANT: States.RESPONDER_INACTIVE_PRESS_IN,\n    RESPONDER_RELEASE: States.NOT_RESPONDER,\n    RESPONDER_TERMINATED: States.NOT_RESPONDER,\n    ENTER_PRESS_RECT: States.NOT_RESPONDER,\n    LEAVE_PRESS_RECT: States.NOT_RESPONDER,\n    LONG_PRESS_DETECTED: States.NOT_RESPONDER,\n  },\n};\n\n// ==== Typical Constants for integrating into UI components ====\n// var HIT_EXPAND_PX = 20;\n// var HIT_VERT_OFFSET_PX = 10;\nconst HIGHLIGHT_DELAY_MS = 130;\n\nconst PRESS_EXPAND_PX = 20;\n\nconst LONG_PRESS_THRESHOLD = 500;\n\nconst LONG_PRESS_DELAY_MS = LONG_PRESS_THRESHOLD - HIGHLIGHT_DELAY_MS;\n\nconst LONG_PRESS_ALLOWED_MOVEMENT = 10;\n\n// Default amount \"active\" region protrudes beyond box\n\n/**\n * By convention, methods prefixed with underscores are meant to be @private,\n * and not @protected. Mixers shouldn't access them - not even to provide them\n * as callback handlers.\n *\n *\n * ========== Geometry =========\n * `Touchable` only assumes that there exists a `HitRect` node. The `PressRect`\n * is an abstract box that is extended beyond the `HitRect`.\n *\n *  +--------------------------+\n *  |                          | - \"Start\" events in `HitRect` cause `HitRect`\n *  |  +--------------------+  |   to become the responder.\n *  |  |  +--------------+  |  | - `HitRect` is typically expanded around\n *  |  |  |              |  |  |   the `VisualRect`, but shifted downward.\n *  |  |  |  VisualRect  |  |  | - After pressing down, after some delay,\n *  |  |  |              |  |  |   and before letting up, the Visual React\n *  |  |  +--------------+  |  |   will become \"active\". This makes it eligible\n *  |  |     HitRect        |  |   for being highlighted (so long as the\n *  |  +--------------------+  |   press remains in the `PressRect`).\n *  |        PressRect     o   |\n *  +----------------------|---+\n *           Out Region    |\n *                         +-----+ This gap between the `HitRect` and\n *                                 `PressRect` allows a touch to move far away\n *                                 from the original hit rect, and remain\n *                                 highlighted, and eligible for a \"Press\".\n *                                 Customize this via\n *                                 `touchableGetPressRectOffset()`.\n *\n *\n *\n * ======= State Machine =======\n *\n * +-------------+ <---+ RESPONDER_RELEASE\n * |NOT_RESPONDER|\n * +-------------+ <---+ RESPONDER_TERMINATED\n *     +\n *     | RESPONDER_GRANT (HitRect)\n *     v\n * +---------------------------+  DELAY   +-------------------------+  T + DELAY     +------------------------------+\n * |RESPONDER_INACTIVE_PRESS_IN|+-------->|RESPONDER_ACTIVE_PRESS_IN| +------------> |RESPONDER_ACTIVE_LONG_PRESS_IN|\n * +---------------------------+          +-------------------------+                +------------------------------+\n *     +            ^                         +           ^                                 +           ^\n *     |LEAVE_      |ENTER_                   |LEAVE_     |ENTER_                           |LEAVE_     |ENTER_\n *     |PRESS_RECT  |PRESS_RECT               |PRESS_RECT |PRESS_RECT                       |PRESS_RECT |PRESS_RECT\n *     |            |                         |           |                                 |           |\n *     v            +                         v           +                                 v           +\n * +----------------------------+  DELAY  +--------------------------+               +-------------------------------+\n * |RESPONDER_INACTIVE_PRESS_OUT|+------->|RESPONDER_ACTIVE_PRESS_OUT|               |RESPONDER_ACTIVE_LONG_PRESS_OUT|\n * +----------------------------+         +--------------------------+               +-------------------------------+\n *\n * T + DELAY => LONG_PRESS_DELAY_MS + DELAY\n *\n * Not drawn are the side effects of each transition. The most important side\n * effect is the `touchableHandlePress` abstract method invocation that occurs\n * when a responder is released while in either of the \"Press\" states.\n *\n * The other important side effects are the highlight abstract method\n * invocations (internal callbacks) to be implemented by the mixer.\n *\n *\n * @lends Touchable.prototype\n */\nconst TouchableMixin = {\n  componentDidMount: function () {\n    if (!Platform.isTV) {\n      return;\n    }\n  },\n\n  /**\n   * Clear all timeouts on unmount\n   */\n  componentWillUnmount: function () {\n    this.touchableDelayTimeout && clearTimeout(this.touchableDelayTimeout);\n    this.longPressDelayTimeout && clearTimeout(this.longPressDelayTimeout);\n    this.pressOutDelayTimeout && clearTimeout(this.pressOutDelayTimeout);\n  },\n\n  /**\n   * It's prefer that mixins determine state in this way, having the class\n   * explicitly mix the state in the one and only `getInitialState` method.\n   *\n   * @return {object} State object to be placed inside of\n   * `this.state.touchable`.\n   */\n  touchableGetInitialState: function (): $TEMPORARY$object<{|\n    touchable: $TEMPORARY$object<{|responderID: null, touchState: void|}>,\n  |}> {\n    return {\n      touchable: {touchState: undefined, responderID: null},\n    };\n  },\n\n  // ==== Hooks to Gesture Responder system ====\n  /**\n   * Must return true if embedded in a native platform scroll view.\n   */\n  touchableHandleResponderTerminationRequest: function (): any {\n    return !this.props.rejectResponderTermination;\n  },\n\n  /**\n   * Must return true to start the process of `Touchable`.\n   */\n  touchableHandleStartShouldSetResponder: function (): any {\n    return !this.props.disabled;\n  },\n\n  /**\n   * Return true to cancel press on long press.\n   */\n  touchableLongPressCancelsPress: function (): boolean {\n    return true;\n  },\n\n  /**\n   * Place as callback for a DOM element's `onResponderGrant` event.\n   * @param {SyntheticEvent} e Synthetic event from event system.\n   *\n   */\n  touchableHandleResponderGrant: function (e: PressEvent) {\n    const dispatchID = e.currentTarget;\n    // Since e is used in a callback invoked on another event loop\n    // (as in setTimeout etc), we need to call e.persist() on the\n    // event to make sure it doesn't get reused in the event object pool.\n    e.persist();\n\n    this.pressOutDelayTimeout && clearTimeout(this.pressOutDelayTimeout);\n    this.pressOutDelayTimeout = null;\n\n    this.state.touchable.touchState = States.NOT_RESPONDER;\n    this.state.touchable.responderID = dispatchID;\n    this._receiveSignal(Signals.RESPONDER_GRANT, e);\n    let delayMS =\n      this.touchableGetHighlightDelayMS !== undefined\n        ? Math.max(this.touchableGetHighlightDelayMS(), 0)\n        : HIGHLIGHT_DELAY_MS;\n    delayMS = isNaN(delayMS) ? HIGHLIGHT_DELAY_MS : delayMS;\n    if (delayMS !== 0) {\n      this.touchableDelayTimeout = setTimeout(\n        this._handleDelay.bind(this, e),\n        delayMS,\n      );\n    } else {\n      this._handleDelay(e);\n    }\n\n    let longDelayMS =\n      this.touchableGetLongPressDelayMS !== undefined\n        ? Math.max(this.touchableGetLongPressDelayMS(), 10)\n        : LONG_PRESS_DELAY_MS;\n    longDelayMS = isNaN(longDelayMS) ? LONG_PRESS_DELAY_MS : longDelayMS;\n    this.longPressDelayTimeout = setTimeout(\n      this._handleLongDelay.bind(this, e),\n      longDelayMS + delayMS,\n    );\n  },\n\n  /**\n   * Place as callback for a DOM element's `onResponderRelease` event.\n   */\n  touchableHandleResponderRelease: function (e: PressEvent) {\n    this.pressInLocation = null;\n    this._receiveSignal(Signals.RESPONDER_RELEASE, e);\n  },\n\n  /**\n   * Place as callback for a DOM element's `onResponderTerminate` event.\n   */\n  touchableHandleResponderTerminate: function (e: PressEvent) {\n    this.pressInLocation = null;\n    this._receiveSignal(Signals.RESPONDER_TERMINATED, e);\n  },\n\n  /**\n   * Place as callback for a DOM element's `onResponderMove` event.\n   */\n  touchableHandleResponderMove: function (e: PressEvent) {\n    // Measurement may not have returned yet.\n    if (!this.state.touchable.positionOnActivate) {\n      return;\n    }\n\n    const positionOnActivate = this.state.touchable.positionOnActivate;\n    const dimensionsOnActivate = this.state.touchable.dimensionsOnActivate;\n    const pressRectOffset = this.touchableGetPressRectOffset\n      ? this.touchableGetPressRectOffset()\n      : {\n          left: PRESS_EXPAND_PX,\n          right: PRESS_EXPAND_PX,\n          top: PRESS_EXPAND_PX,\n          bottom: PRESS_EXPAND_PX,\n        };\n\n    let pressExpandLeft = pressRectOffset.left;\n    let pressExpandTop = pressRectOffset.top;\n    let pressExpandRight = pressRectOffset.right;\n    let pressExpandBottom = pressRectOffset.bottom;\n\n    const hitSlop = this.touchableGetHitSlop\n      ? this.touchableGetHitSlop()\n      : null;\n\n    if (hitSlop) {\n      pressExpandLeft += hitSlop.left || 0;\n      pressExpandTop += hitSlop.top || 0;\n      pressExpandRight += hitSlop.right || 0;\n      pressExpandBottom += hitSlop.bottom || 0;\n    }\n\n    const touch = extractSingleTouch(e.nativeEvent);\n    const pageX = touch && touch.pageX;\n    const pageY = touch && touch.pageY;\n\n    if (this.pressInLocation) {\n      const movedDistance = this._getDistanceBetweenPoints(\n        pageX,\n        pageY,\n        this.pressInLocation.pageX,\n        this.pressInLocation.pageY,\n      );\n      if (movedDistance > LONG_PRESS_ALLOWED_MOVEMENT) {\n        this._cancelLongPressDelayTimeout();\n      }\n    }\n\n    const isTouchWithinActive =\n      pageX > positionOnActivate.left - pressExpandLeft &&\n      pageY > positionOnActivate.top - pressExpandTop &&\n      pageX <\n        positionOnActivate.left +\n          dimensionsOnActivate.width +\n          pressExpandRight &&\n      pageY <\n        positionOnActivate.top +\n          dimensionsOnActivate.height +\n          pressExpandBottom;\n    if (isTouchWithinActive) {\n      const prevState = this.state.touchable.touchState;\n      this._receiveSignal(Signals.ENTER_PRESS_RECT, e);\n      const curState = this.state.touchable.touchState;\n      if (\n        curState === States.RESPONDER_INACTIVE_PRESS_IN &&\n        prevState !== States.RESPONDER_INACTIVE_PRESS_IN\n      ) {\n        // fix for t7967420\n        this._cancelLongPressDelayTimeout();\n      }\n    } else {\n      this._cancelLongPressDelayTimeout();\n      this._receiveSignal(Signals.LEAVE_PRESS_RECT, e);\n    }\n  },\n\n  /**\n   * Invoked when the item receives focus. Mixers might override this to\n   * visually distinguish the `VisualRect` so that the user knows that it\n   * currently has the focus. Most platforms only support a single element being\n   * focused at a time, in which case there may have been a previously focused\n   * element that was blurred just prior to this. This can be overridden when\n   * using `Touchable.Mixin.withoutDefaultFocusAndBlur`.\n   */\n  touchableHandleFocus: function (e: Event) {\n    this.props.onFocus && this.props.onFocus(e);\n  },\n\n  /**\n   * Invoked when the item loses focus. Mixers might override this to\n   * visually distinguish the `VisualRect` so that the user knows that it\n   * no longer has focus. Most platforms only support a single element being\n   * focused at a time, in which case the focus may have moved to another.\n   * This can be overridden when using\n   * `Touchable.Mixin.withoutDefaultFocusAndBlur`.\n   */\n  touchableHandleBlur: function (e: Event) {\n    this.props.onBlur && this.props.onBlur(e);\n  },\n\n  // ==== Abstract Application Callbacks ====\n\n  /**\n   * Invoked when the item should be highlighted. Mixers should implement this\n   * to visually distinguish the `VisualRect` so that the user knows that\n   * releasing a touch will result in a \"selection\" (analog to click).\n   *\n   * @abstract\n   * touchableHandleActivePressIn: function,\n   */\n\n  /**\n   * Invoked when the item is \"active\" (in that it is still eligible to become\n   * a \"select\") but the touch has left the `PressRect`. Usually the mixer will\n   * want to unhighlight the `VisualRect`. If the user (while pressing) moves\n   * back into the `PressRect` `touchableHandleActivePressIn` will be invoked\n   * again and the mixer should probably highlight the `VisualRect` again. This\n   * event will not fire on an `touchEnd/mouseUp` event, only move events while\n   * the user is depressing the mouse/touch.\n   *\n   * @abstract\n   * touchableHandleActivePressOut: function\n   */\n\n  /**\n   * Invoked when the item is \"selected\" - meaning the interaction ended by\n   * letting up while the item was either in the state\n   * `RESPONDER_ACTIVE_PRESS_IN` or `RESPONDER_INACTIVE_PRESS_IN`.\n   *\n   * @abstract\n   * touchableHandlePress: function\n   */\n\n  /**\n   * Invoked when the item is long pressed - meaning the interaction ended by\n   * letting up while the item was in `RESPONDER_ACTIVE_LONG_PRESS_IN`. If\n   * `touchableHandleLongPress` is *not* provided, `touchableHandlePress` will\n   * be called as it normally is. If `touchableHandleLongPress` is provided, by\n   * default any `touchableHandlePress` callback will not be invoked. To\n   * override this default behavior, override `touchableLongPressCancelsPress`\n   * to return false. As a result, `touchableHandlePress` will be called when\n   * lifting up, even if `touchableHandleLongPress` has also been called.\n   *\n   * @abstract\n   * touchableHandleLongPress: function\n   */\n\n  /**\n   * Returns the number of millis to wait before triggering a highlight.\n   *\n   * @abstract\n   * touchableGetHighlightDelayMS: function\n   */\n\n  /**\n   * Returns the amount to extend the `HitRect` into the `PressRect`. Positive\n   * numbers mean the size expands outwards.\n   *\n   * @abstract\n   * touchableGetPressRectOffset: function\n   */\n\n  // ==== Internal Logic ====\n\n  /**\n   * Measures the `HitRect` node on activation. The Bounding rectangle is with\n   * respect to viewport - not page, so adding the `pageXOffset/pageYOffset`\n   * should result in points that are in the same coordinate system as an\n   * event's `globalX/globalY` data values.\n   *\n   * - Consider caching this for the lifetime of the component, or possibly\n   *   being able to share this cache between any `ScrollMap` view.\n   *\n   * @sideeffects\n   * @private\n   */\n  _remeasureMetricsOnActivation: function () {\n    const responderID = this.state.touchable.responderID;\n    if (responderID == null) {\n      return;\n    }\n\n    if (typeof responderID === 'number') {\n      UIManager.measure(responderID, this._handleQueryLayout);\n    } else {\n      responderID.measure(this._handleQueryLayout);\n    }\n  },\n\n  _handleQueryLayout: function (\n    l: number,\n    t: number,\n    w: number,\n    h: number,\n    globalX: number,\n    globalY: number,\n  ) {\n    //don't do anything UIManager failed to measure node\n    if (!l && !t && !w && !h && !globalX && !globalY) {\n      return;\n    }\n    this.state.touchable.positionOnActivate &&\n      Position.release(this.state.touchable.positionOnActivate);\n    this.state.touchable.dimensionsOnActivate &&\n      BoundingDimensions.release(this.state.touchable.dimensionsOnActivate);\n    this.state.touchable.positionOnActivate = Position.getPooled(\n      globalX,\n      globalY,\n    );\n    this.state.touchable.dimensionsOnActivate = BoundingDimensions.getPooled(\n      w,\n      h,\n    );\n  },\n\n  _handleDelay: function (e: PressEvent) {\n    this.touchableDelayTimeout = null;\n    this._receiveSignal(Signals.DELAY, e);\n  },\n\n  _handleLongDelay: function (e: PressEvent) {\n    this.longPressDelayTimeout = null;\n    const curState = this.state.touchable.touchState;\n    if (\n      curState === States.RESPONDER_ACTIVE_PRESS_IN ||\n      curState === States.RESPONDER_ACTIVE_LONG_PRESS_IN\n    ) {\n      this._receiveSignal(Signals.LONG_PRESS_DETECTED, e);\n    }\n  },\n\n  /**\n   * Receives a state machine signal, performs side effects of the transition\n   * and stores the new state. Validates the transition as well.\n   *\n   * @param {Signals} signal State machine signal.\n   * @throws Error if invalid state transition or unrecognized signal.\n   * @sideeffects\n   */\n  _receiveSignal: function (signal: Signal, e: PressEvent) {\n    const responderID = this.state.touchable.responderID;\n    const curState = this.state.touchable.touchState;\n    const nextState = Transitions[curState] && Transitions[curState][signal];\n    if (!responderID && signal === Signals.RESPONDER_RELEASE) {\n      return;\n    }\n    if (!nextState) {\n      throw new Error(\n        'Unrecognized signal `' +\n          signal +\n          '` or state `' +\n          curState +\n          '` for Touchable responder `' +\n          typeof this.state.touchable.responderID ===\n        'number'\n          ? this.state.touchable.responderID\n          : 'host component' + '`',\n      );\n    }\n    if (nextState === States.ERROR) {\n      throw new Error(\n        'Touchable cannot transition from `' +\n          curState +\n          '` to `' +\n          signal +\n          '` for responder `' +\n          typeof this.state.touchable.responderID ===\n        'number'\n          ? this.state.touchable.responderID\n          : '<<host component>>' + '`',\n      );\n    }\n    if (curState !== nextState) {\n      this._performSideEffectsForTransition(curState, nextState, signal, e);\n      this.state.touchable.touchState = nextState;\n    }\n  },\n\n  _cancelLongPressDelayTimeout: function () {\n    this.longPressDelayTimeout && clearTimeout(this.longPressDelayTimeout);\n    this.longPressDelayTimeout = null;\n  },\n\n  _isHighlight: function (state: State): boolean {\n    return (\n      state === States.RESPONDER_ACTIVE_PRESS_IN ||\n      state === States.RESPONDER_ACTIVE_LONG_PRESS_IN\n    );\n  },\n\n  _savePressInLocation: function (e: PressEvent) {\n    const touch = extractSingleTouch(e.nativeEvent);\n    const pageX = touch && touch.pageX;\n    const pageY = touch && touch.pageY;\n    const locationX = touch && touch.locationX;\n    const locationY = touch && touch.locationY;\n    this.pressInLocation = {pageX, pageY, locationX, locationY};\n  },\n\n  _getDistanceBetweenPoints: function (\n    aX: number,\n    aY: number,\n    bX: number,\n    bY: number,\n  ): number {\n    const deltaX = aX - bX;\n    const deltaY = aY - bY;\n    return Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n  },\n\n  /**\n   * Will perform a transition between touchable states, and identify any\n   * highlighting or unhighlighting that must be performed for this particular\n   * transition.\n   *\n   * @param {States} curState Current Touchable state.\n   * @param {States} nextState Next Touchable state.\n   * @param {Signal} signal Signal that triggered the transition.\n   * @param {Event} e Native event.\n   * @sideeffects\n   */\n  _performSideEffectsForTransition: function (\n    curState: State,\n    nextState: State,\n    signal: Signal,\n    e: PressEvent,\n  ) {\n    const curIsHighlight = this._isHighlight(curState);\n    const newIsHighlight = this._isHighlight(nextState);\n\n    const isFinalSignal =\n      signal === Signals.RESPONDER_TERMINATED ||\n      signal === Signals.RESPONDER_RELEASE;\n\n    if (isFinalSignal) {\n      this._cancelLongPressDelayTimeout();\n    }\n\n    const isInitialTransition =\n      curState === States.NOT_RESPONDER &&\n      nextState === States.RESPONDER_INACTIVE_PRESS_IN;\n\n    const isActiveTransition = !IsActive[curState] && IsActive[nextState];\n    if (isInitialTransition || isActiveTransition) {\n      this._remeasureMetricsOnActivation();\n    }\n\n    if (IsPressingIn[curState] && signal === Signals.LONG_PRESS_DETECTED) {\n      this.touchableHandleLongPress && this.touchableHandleLongPress(e);\n    }\n\n    if (newIsHighlight && !curIsHighlight) {\n      this._startHighlight(e);\n    } else if (!newIsHighlight && curIsHighlight) {\n      this._endHighlight(e);\n    }\n\n    if (IsPressingIn[curState] && signal === Signals.RESPONDER_RELEASE) {\n      const hasLongPressHandler = !!this.props.onLongPress;\n      const pressIsLongButStillCallOnPress =\n        IsLongPressingIn[curState] && // We *are* long pressing.. // But either has no long handler\n        (!hasLongPressHandler || !this.touchableLongPressCancelsPress()); // or we're told to ignore it.\n\n      const shouldInvokePress =\n        !IsLongPressingIn[curState] || pressIsLongButStillCallOnPress;\n      if (shouldInvokePress && this.touchableHandlePress) {\n        if (!newIsHighlight && !curIsHighlight) {\n          // we never highlighted because of delay, but we should highlight now\n          this._startHighlight(e);\n          this._endHighlight(e);\n        }\n        if (Platform.OS === 'android' && !this.props.touchSoundDisabled) {\n          SoundManager.playTouchSound();\n        }\n        this.touchableHandlePress(e);\n      }\n    }\n\n    this.touchableDelayTimeout && clearTimeout(this.touchableDelayTimeout);\n    this.touchableDelayTimeout = null;\n  },\n\n  _startHighlight: function (e: PressEvent) {\n    this._savePressInLocation(e);\n    this.touchableHandleActivePressIn && this.touchableHandleActivePressIn(e);\n  },\n\n  _endHighlight: function (e: PressEvent) {\n    if (this.touchableHandleActivePressOut) {\n      if (\n        this.touchableGetPressOutDelayMS &&\n        this.touchableGetPressOutDelayMS()\n      ) {\n        this.pressOutDelayTimeout = setTimeout(() => {\n          this.touchableHandleActivePressOut(e);\n        }, this.touchableGetPressOutDelayMS());\n      } else {\n        this.touchableHandleActivePressOut(e);\n      }\n    }\n  },\n\n  withoutDefaultFocusAndBlur: ({}: $TEMPORARY$object<{||}>),\n};\n\n/**\n * Provide an optional version of the mixin where `touchableHandleFocus` and\n * `touchableHandleBlur` can be overridden. This allows appropriate defaults to\n * be set on TV platforms, without breaking existing implementations of\n * `Touchable`.\n */\nconst {\n  touchableHandleFocus,\n  touchableHandleBlur,\n  ...TouchableMixinWithoutDefaultFocusAndBlur\n} = TouchableMixin;\nTouchableMixin.withoutDefaultFocusAndBlur =\n  TouchableMixinWithoutDefaultFocusAndBlur;\n\nconst Touchable = {\n  Mixin: TouchableMixin,\n  /**\n   * Renders a debugging overlay to visualize touch target with hitSlop (might not work on Android).\n   */\n  renderDebugView: ({\n    color,\n    hitSlop,\n  }: {\n    color: ColorValue,\n    hitSlop: EdgeInsetsProp,\n    ...\n  }): null | React.Node => {\n    if (__DEV__) {\n      return <PressabilityDebugView color={color} hitSlop={hitSlop} />;\n    }\n    return null;\n  },\n};\n\nmodule.exports = Touchable;\n"],"mappings":"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"}